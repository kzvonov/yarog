<%= turbo_stream_from "game_#{@game.id}" %>

<div style="margin-bottom: 20px;">
  <%= link_to "â† Back to Games", master_games_path, style: "display: inline-block; margin-bottom: 15px; color: var(--accent-blood-light); text-decoration: none;" %>

  <div style="display: flex; justify-content: space-between; align-items: center;">
    <h1><%= @game.name %></h1>
    <%= link_to "Edit", edit_master_game_path(@game), class: "btn btn-secondary" %>
  </div>
</div>

<div class="game-layout">
  <!-- Heroes Section (Left) -->
  <div class="game-heroes">
    <!-- Add Hero Form -->
    <%= render "add_hero_form", game: @game %>

    <!-- Heroes Grid (4 per row) -->
    <div id="game_heroes">
      <% if @heroes.any? %>
        <div class="heroes-grid">
          <% @heroes.each do |hero| %>
            <%= render "hero_card", hero: hero, game: @game %>
          <% end %>
        </div>
      <% else %>
        <div style="text-align: center; padding: 60px 20px; border: 2px dashed var(--border-dark);">
          <p style="font-size: 1.1rem; color: var(--text-secondary); margin-bottom: 8px;">No heroes in this game yet</p>
          <p style="font-size: 0.9rem; color: var(--text-secondary);">Add a hero using the form above</p>
        </div>
      <% end %>
    </div>
  </div>

  <!-- Notes Section (Right, Fixed) -->
  <div class="game-notes">
    <%= render "notes_editor", game: @game %>
  </div>
</div>
